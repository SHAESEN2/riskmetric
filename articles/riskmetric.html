<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Started • riskmetric</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">riskmetric</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/riskmetric.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/extending-riskmetric.html">Extending riskmetric</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pharmaR/riskmetric">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Get Started</h1>
                        <h4 class="author">R Validation Hub</h4>
            
            <h4 class="date">2019-11-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaR/riskmetric/blob/master/vignettes/riskmetric.Rmd"><code>vignettes/riskmetric.Rmd</code></a></small>
      <div class="hidden name"><code>riskmetric.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>riskmetric</code> provides a workflow to evaluate the quality of a set of R packages that involves four major steps. The workflow can help users to choose high quality R packages, improve package reliability and prove the validity of R packages in a regulated industry. The four steps include:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Finding a source for package information</strong> <code><a href="../reference/pkg_ref.html">pkg_ref()</a></code><br>
this can be any source of package metadata, such as a
<ul>
<li>package repository webportal from which we can scrape metadata</li>
<li>built and installed package in a local library</li>
<li>directory containing package source code</li>
</ul>
</li>
<li>
<strong>Assessing the package under validation criteria</strong> <code><a href="../reference/assess.html">assess()</a></code><br>
collect a set of metadata for scoring risk, this might include
<ul>
<li>a profile of the number of active users over the last month</li>
<li>the availability of documentation for package functions</li>
<li>the use of a unit testing framework</li>
<li>the test coverage</li>
</ul>
</li>
<li>
<strong>Scoring assessment criteria</strong> <code><a href="../reference/score.html">score()</a></code>
</li>
<li>
<strong>Summarize scores into an aggregate risk metric</strong> <code><a href="../reference/summarize_risk.html">summarize_risk()</a></code>
</li>
</ol>
</div>
<div id="package-reference-objects" class="section level1">
<h1 class="hasAnchor">
<a href="#package-reference-objects" class="anchor"></a>Package Reference Objects</h1>
<p>Before we get started assessing packages, we need a place to aggregate all of our package metadata. To handle this, we use the <code>pkg_ref</code> class. As package metadata is requested, it will be housed within this object for reuse, avoiding repeatedly having to scrape, download, parse or derive the same metadata multiple times.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(riskmetric)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="../reference/pkg_ref.html">pkg_ref</a></span>(<span class="st">"riskmetric"</span>)</a></code></pre></div>
<pre><code>#&gt; &lt;pkg_install, pkg_ref&gt; riskmetric v0.1.0.9000
#&gt; $path
#&gt;   [1] "/home/user/username/R/3.6/Resources/library/riskmetric"
#&gt; $source
#&gt;   [1] "pkg_install"
#&gt; $version
#&gt;   [1] '0.1.0.9000'
#&gt; $name
#&gt;   [1] "riskmetric"
#&gt; $description...
#&gt; $help...
#&gt; $help_aliases...
#&gt; $news...</code></pre>
<p>A package reference defines one of many different ways of gathering information about a package and its development practices. The targets of this reference could be a source code directory, installation in a package library, or simply a url in a web-hosted repository from which metadata can be scraped. Each piece of metadata is captured through a callback function, which can be uniquely handled for each source of package information.</p>
<p>Furthermore, <code>pkg_ref</code> objects can be coerced to a <code>tibble</code> for easier, parallel assessment of packages.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">package_tbl &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pkg_ref.html">pkg_ref</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"riskmetric"</span>, <span class="st">"utils"</span>, <span class="st">"tools"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>()</a></code></pre></div>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;   package    version    pkg_ref            
#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;list&lt;pkg_ref&gt;&gt;    
#&gt; 1 riskmetric 0.1.0.9000 riskmetric&lt;install&gt;
#&gt; 2 utils      3.6.1      utils&lt;install&gt;     
#&gt; 3 tools      3.6.1      tools&lt;install&gt;</code></pre>
</div>
<div id="core-verbs" class="section level1">
<h1 class="hasAnchor">
<a href="#core-verbs" class="anchor"></a>Core Verbs</h1>
<p>In <code>riskmetric</code>, the core operations of package validation are handled in a series of verbs. Once package reference objects have been defined, they can be processed by chaining these foundational operations. These verbs, as well as many of the features of package assessment, are designed to be highly extensible to make it easier for package validation to be a community effort.</p>
<p>See the <a href="https://pharmar.github.io/riskmetric/articles/extending-riskmetric.html"><code>extending-riskmetric</code></a> vignette for more details</p>
<div id="creating-a-package-reference" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-package-reference" class="anchor"></a>Creating a Package Reference</h2>
<p>We’ll use the <code>tibble</code> from above as our example</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">package_tbl &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pkg_ref.html">pkg_ref</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"riskmetric"</span>, <span class="st">"utils"</span>, <span class="st">"tools"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>()</a></code></pre></div>
</div>
<div id="assess" class="section level2">
<h2 class="hasAnchor">
<a href="#assess" class="anchor"></a>Assess</h2>
<p>The first component of the validation process is an assessment. This is used for iterating over assessment functions which serve to fetch any necessary package metadata and produce an atomic value reflective of each assessment. For example, when assessing whether a package’s NEWS files are up-to-date, it may return a logical vector indicating which NEWS files have entries for the current package version.</p>
<p>The <code>assess</code> function iterates over a list of assessment functions, adding a column per assessment. By default, it will use all the available assessment functions (all functions in the <code>riskmetric</code> exports beginning with <code>assess_*</code>). Once applied, an assessment produces a <code>pkg_metric</code> object.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">package_tbl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/assess.html">assess</a></span>()</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 6</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   package  version  pkg_ref             has_news     export_help   news_current </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;    &lt;list&lt;pkg_ref&gt;&gt;     &lt;list&lt;pkg_m&gt; &lt;list&lt;pkg_me&gt; &lt;list&lt;pkg_me&gt;</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 1 riskmet… 0.1.0.9… riskmetric&lt;install&gt; 0            &lt;lgl [20]&gt;    &lt;lgl [0]&gt;    </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 2 utils    3.6.1    utils&lt;install&gt;      0            &lt;lgl [219]&gt;   &lt;lgl [0]&gt;    </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 3 tools    3.6.1    tools&lt;install&gt;      0            &lt;lgl [119]&gt;   &lt;lgl [0]&gt;</span></a></code></pre></div>
<p><code>assess</code> will use all available <code>riskmetric</code> assessment functions by default. A subset of functions, or additional user-defined functions, can be used by passing a list of functions to the <code>assessments</code> argument.</p>
</div>
<div id="score" class="section level2">
<h2 class="hasAnchor">
<a href="#score" class="anchor"></a>Score</h2>
<p>After gathering the available metric metadata, every metric object is scored. Scoring a metric translates the assessment atomic values into a single numeric score. For example, we might score the number of available NEWS files by giving a package a perfect score (<code>1.0</code>) only when all NEWS files have been updated for the latest version, or alternatively we might score it as the fraction of NEWS files that are up-to-date.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">package_tbl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/assess.html">assess</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/score.html">score</a></span>()</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 6</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;   package    version    pkg_ref             has_news export_help news_current</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;list&lt;pkg_ref&gt;&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 1 riskmetric 0.1.0.9000 riskmetric&lt;install&gt;        0       1                0</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 2 utils      3.6.1      utils&lt;install&gt;             0       0.995            0</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 3 tools      3.6.1      tools&lt;install&gt;             0       1                0</span></a></code></pre></div>
<p>Keeping the scoring separated from the assessment allows us to easily iterate on how scores are defined and allows for the scoring function to be easily overwritten.</p>
</div>
<div id="summarizing-package-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#summarizing-package-risk" class="anchor"></a>Summarizing Package Risk</h2>
<p>What we ultimately want is a single numeric value which indicates the “risk” involved with using a given package. For the <code>dplyr</code>-savvy, this will look quite familiar. We’ve defined a default summarizing function <code>summarize_risk</code>. It accepts the full data.frame and performs a default risk assessment assuming all the available <code>riskmetric</code> assessments have been performed.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">package_tbl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/assess.html">assess</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/score.html">score</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">risk =</span> <span class="kw"><a href="../reference/summarize_risk.html">summarize_risk</a></span>(.))</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; # A tibble: 3 x 7</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;   package   version  pkg_ref             has_news export_help news_current  risk</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;    &lt;list&lt;pkg_ref&gt;&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 1 riskmetr… 0.1.0.9… riskmetric&lt;install&gt;        0       1                0 0.6  </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; 2 utils     3.6.1    utils&lt;install&gt;             0       0.995            0 0.602</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 3 tools     3.6.1    tools&lt;install&gt;             0       1                0 0.6</span></a></code></pre></div>
</div>
</div>
<div id="how-you-can-help" class="section level1">
<h1 class="hasAnchor">
<a href="#how-you-can-help" class="anchor"></a>How you can help…</h1>
<p>As you can see, the package is currently quite bare-bones and nobody would reasonably choose packages based solely on the existence of a NEWS file.</p>
<p>Our priority so far has been to set up an extensible framework as the foundation for a community effort, and that’s where you come in! There are a few things you can do to get started.</p>
<ol style="list-style-type: decimal">
<li>Check out the <code>extending-riskmetric</code> vignette to see how to extend the functionality with your own metrics</li>
<li>
<a href="https://github.com/pharmaR/riskmetric/issues?q=is%3Aopen+is%3Aissue+label%3A%22Metric+Proposal%22">Take part in the discussion</a> about which metrics are captured and how they are measured</li>
<li>
<a href="https://github.com/pharmaR/riskmetric/issues/new?labels=Metric%20Proposal">Propose a new metric on the <code>riskmetric</code> GitHub</a> where we can further discuss new metric proposals</li>
<li>Help us to develop new metrics and package functionality</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#package-reference-objects">Package Reference Objects</a></li>
      <li>
<a href="#core-verbs">Core Verbs</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-package-reference">Creating a Package Reference</a></li>
      <li><a href="#assess">Assess</a></li>
      <li><a href="#score">Score</a></li>
      <li><a href="#summarizing-package-risk">Summarizing Package Risk</a></li>
      </ul>
</li>
      <li><a href="#how-you-can-help">How you can help…</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by R Validation Hub, Doug Kelkhoff, Yilong Zhang, Kevin K.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
